let packageLocation="./js-packages/carousel",interval=5e3,slidingTime=600,carousel=null,container=null,slides=null,leftAndRightButtons=[],bottomButtons=null,activeSlide=0,isNotSliding=!0,globalOffset=1,retardedAutoSliding=null,autoSlidingInterval=null;function setCarousel(t){loadCSS(),(carousel=t).classList.add("carousel");let e=[...carousel.children];setContainer(),setSlides(e),setButtons(),setBottomButtons(e),setButtonsListeners(),setRetardedAutoSliding()}function loadCSS(){if(!document.getElementById("carouselCSS")){let t=document.createElement("link");t.rel="stylesheet",t.href="./js-packages/carousel/styles/carousel-style.css",t.type="text/css",t.id="carouselCSS",document.head.appendChild(t),console.error("Le CSS du carousel n'a pas \xe9t\xe9 charg\xe9 initialement et a d\xfb l'\xeatre par le script.\nN'oublie pas de rajouter la balise Link"),console.error(t)}}function setContainer(){(container=document.createElement("div")).className="carousel-container",carousel.appendChild(container)}function setSlides(t){slides=t.map(t=>{let e=document.createElement("div");return e.className="carousel-slide",e.appendChild(t),e}),container.appendChild(slides[0])}function setButtons(){for(let t=0;t<2;t++){let e=document.createElement("button");e.className="carousel-button",e.type="button";let l=document.createElement("span");l.setAttribute("aria-hidden","true"),0===t?(e.classList.add("carousel-left-button"),e.ariaLabel="Pr\xe9c\xe9dent",l.className="carousel-left-icon"):(e.classList.add("carousel-right-button"),e.ariaLabel="Suivant",l.className="carousel-right-icon"),carousel.appendChild(e),e.appendChild(l),leftAndRightButtons.push(e)}}function setBottomButtons(t){let e=document.createElement("div");e.className="carousel-bottom-container",carousel.appendChild(e),(bottomButtons=t.map(l=>{let i=document.createElement("button");return i.type="button",i.ariaLabel=`Slide ${t.indexOf(l)+1}`,i.className="carousel-bottom-button",e.appendChild(i),i}))[0].classList.add("carousel-bottom-button-active")}function setButtonsListeners(){for(let t=0;t<2;t++)0===t?leftAndRightButtons[t].addEventListener("click",()=>slide("slide-to-left",1)):leftAndRightButtons[t].addEventListener("click",()=>slide("slide-to-right",1));for(let e=0;e<bottomButtons.length;e++)bottomButtons[e].addEventListener("click",()=>{moveToSlide(e)})}function targetSlide(t){let e=activeSlide+t;return e<0?e=slides.length+t:e>=slides.length&&(e=0),e}function slide(t,e){if(!isNotSliding)return;isNotSliding=!1,clearTimeout(retardedAutoSliding),clearInterval(autoSlidingInterval),container.style.width="200%";let l=0;"slide-to-left"===t?(l=targetSlide(-1),container.insertBefore(slides[l],container.firstChild),container.style.marginLeft="-100%"):(l=targetSlide(1),container.appendChild(slides[l])),container.classList.add(t),container.style.transition=`transform ${600/globalOffset}ms ease-in-out`,bottomButtons[activeSlide].classList.remove("carousel-bottom-button-active"),bottomButtons[l].classList.add("carousel-bottom-button-active"),container.addEventListener("transitionend",function i(){container.removeEventListener("transitionend",i),slides[activeSlide].remove(),container.removeAttribute("style"),container.classList.remove(t),activeSlide=l,isNotSliding=!0,0!=(e-=1)?setTimeout(()=>{slide(t,e)},0):(globalOffset=1,setRetardedAutoSliding())})}function moveToSlide(t){let e="";if(0==(globalOffset=t-activeSlide)){globalOffset=1;return}slide(e=globalOffset>0?"slide-to-right":"slide-to-left",globalOffset=Math.abs(globalOffset))}function setRetardedAutoSliding(){retardedAutoSliding=setTimeout(setAutoSlidingInterval,5e3)}function setAutoSlidingInterval(){autoSlidingInterval=setInterval(slide("slide-to-right",1),5e3)}export{setCarousel};